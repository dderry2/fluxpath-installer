# ============================================
# File: mmu/mmu_load.cfg
# Location: ~/printer_data/config/mmu/
#
# Purpose:
#   Load filament for active lane from PARK â†’ NOZZLE.
# ============================================

[gcode_macro MMU_LOAD]
gcode:
  {% set v = printer["gcode_macro MMU_VARS"] %}
  RESPOND PREFIX=MMU MSG="LOAD: lane {{ v.active_lane }} from park to nozzle"

  MMU_MOVE_TO_CUTTER_FROM_PARK
  MMU_MOVE_TO_FILAMENT_SENSOR_EXPECT

  MMU_MOVE_E E={v.filament_sensor_to_extruder} F=1500

  G91
  G1 E={v.nozzle_push} F600
  G90

  RESPOND PREFIX=MMU MSG="LOAD complete, lane {{ v.active_lane }} at nozzle"
