# ============================================================
\
# FluxPath MMU Lane Test Wizard
\
# Created in Canada — Enhanced by AI
\
# ============================================================
\

\
[gcode_macro MMU_LANE_TEST_START]
\
description: "Start the FluxPath MMU lane test wizard"
\
gcode:
\
    {% set lanes = printer.mmu_vars.lanes|default(2)|int %}
\
    RESPOND PREFIX="wizard" MSG="Starting FluxPath Lane Test Wizard"
\
    RESPOND PREFIX="wizard" MSG="Detected {{ lanes }} lanes"
\
    RESPOND PREFIX="wizard" MSG="Step 1: Lane selection test"
\
    RESPOND PREFIX="wizard" MSG="Run: MMU_LANE_TEST_SELECT LANE=1"
\

\
[gcode_macro MMU_LANE_TEST_SELECT]
\
description: "Test lane selection for a specific lane"
\
gcode:
\
    {% set lane = params.LANE|int %}
\
    RESPOND PREFIX="wizard" MSG="Testing lane selection for lane {{ lane }}"
\
    RESPOND PREFIX="wizard" MSG="Executing: MMU_UI_SET_LANE LANE={{ lane }}"
\
    MMU_UI_SET_LANE LANE={lane}
\
    RESPOND PREFIX="wizard" MSG="Lane {{ lane }} selection complete."
\

\
[gcode_macro MMU_LANE_TEST_LOAD]
\
description: "Test loading filament for a lane"
\
gcode:
\
    {% set lane = params.LANE|int %}
\
    RESPOND PREFIX="wizard" MSG="Testing LOAD for lane {{ lane }}"
\
    RESPOND PREFIX="wizard" MSG="Executing: MMU_UI_LOAD"
\
    MMU_UI_LOAD
\
    RESPOND PREFIX="wizard" MSG="Load test complete for lane {{ lane }}"
\

\
[gcode_macro MMU_LANE_TEST_UNLOAD]
\
description: "Test unloading filament for a lane"
\
gcode:
\
    {% set lane = params.LANE|int %}
\
    RESPOND PREFIX="wizard" MSG="Testing UNLOAD for lane {{ lane }}"
\
    RESPOND PREFIX="wizard" MSG="Executing: MMU_UI_UNLOAD"
\
    MMU_UI_UNLOAD
\
    RESPOND PREFIX="wizard" MSG="Unload test complete for lane {{ lane }}"
\

\
[gcode_macro MMU_LANE_TEST_FULL]
\
description: "Run full lane test: select → load → unload"
\
gcode:
\
    {% set lane = params.LANE|int %}
\
    RESPOND PREFIX="wizard" MSG="Running full lane test for lane {{ lane }}"
\
    MMU_UI_SET_LANE LANE={lane}
\
    MMU_UI_LOAD
\
    MMU_UI_UNLOAD
\
    RESPOND PREFIX="wizard" MSG="Full lane test complete for lane {{ lane }}"
\

\
[gcode_macro MMU_LANE_TEST_DONE]
\
description: "Finish the lane test wizard"
\
gcode:
\
    RESPOND PREFIX="wizard" MSG="FluxPath Lane Test Wizard complete."
\
    RESPOND PREFIX="wizard" MSG="All lane tests finished."
\

