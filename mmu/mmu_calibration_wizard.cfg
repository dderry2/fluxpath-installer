# ============================================================
\
# FluxPath MMU Calibration Wizard
\
# Created in Canada — Enhanced by AI
\
# ============================================================
\

\
[gcode_macro MMU_CAL_WIZARD_START]
\
description: "Start the FluxPath MMU calibration wizard"
\
gcode:
\
    {% set lanes = printer.mmu_vars.lanes|default(2)|int %}
\
    RESPOND PREFIX="wizard" MSG="Starting FluxPath Calibration Wizard"
\
    RESPOND PREFIX="wizard" MSG="Detected {{ lanes }} lanes"
\
    RESPOND PREFIX="wizard" MSG="Step 1: Park → Cutter distance"
\
    RESPOND PREFIX="wizard" MSG="Run: MMU_CAL_PARK_TO_CUTTER_LANE LANE=1"
\

\
[gcode_macro MMU_CAL_PARK_TO_CUTTER_LANE]
\
description: "Calibrate PARK → CUTTER distance for a lane"
\
gcode:
\
    {% set lane = params.LANE|int %}
\
    RESPOND PREFIX="wizard" MSG="Calibrating PARK → CUTTER for lane {{ lane }}"
\
    RESPOND PREFIX="wizard" MSG="Move filament until it reaches the cutter."
\
    RESPOND PREFIX="wizard" MSG="Record the distance and update mmu_vars.cfg."
\

\
[gcode_macro MMU_CAL_CUTTER_TO_FILAMENT_SENSOR]
\
description: "Calibrate CUTTER → SENSOR distance"
\
gcode:
\
    RESPOND PREFIX="wizard" MSG="Calibrating CUTTER → SENSOR distance"
\
    RESPOND PREFIX="wizard" MSG="Move filament until it triggers the sensor."
\
    RESPOND PREFIX="wizard" MSG="Record the distance and update mmu_vars.cfg."
\

\
[gcode_macro MMU_CAL_FILAMENT_SENSOR_TO_EXTRUDER]
\
description: "Calibrate SENSOR → EXTRUDER distance"
\
gcode:
\
    RESPOND PREFIX="wizard" MSG="Calibrating SENSOR → EXTRUDER distance"
\
    RESPOND PREFIX="wizard" MSG="Move filament until it reaches the extruder gears."
\
    RESPOND PREFIX="wizard" MSG="Record the distance and update mmu_vars.cfg."
\

\
[gcode_macro MMU_CAL_WIZARD_NEXT]
\
description: "Advance to the next calibration step"
\
gcode:
\
    RESPOND PREFIX="wizard" MSG="Proceed to the next calibration step."
\

\
[gcode_macro MMU_CAL_WIZARD_DONE]
\
description: "Finish the calibration wizard"
\
gcode:
\
    RESPOND PREFIX="wizard" MSG="FluxPath Calibration Wizard complete."
\
    RESPOND PREFIX="wizard" MSG="Update mmu_vars.cfg with your measured values."
\

